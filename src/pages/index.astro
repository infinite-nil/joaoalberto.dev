---
import BaseLayout from "../layouts/BaseLayout.astro";
import Heading from "../components/Heading.astro";
import PostCard from "../components/PostCard.astro";
import Text from "../components/Text.astro";
import TextSmall from "../components/TextSmall.astro";
import ArrowRight from "../components/icons/ArrowRight.astro";
import type { LabProps } from "./lab.astro";

const posts = (await Astro.glob("./blog/*.{md,mdx}"))
  .sort(
    (a, b) =>
      new Date(b.frontmatter.pubDate).valueOf() -
      new Date(a.frontmatter.pubDate).valueOf()
  )
  .filter((_, i) => i < 3);

const labs = (await Astro.glob("./lab/*.astro")).filter(
  (_, i) => i < 3
) as unknown as LabProps[];
---

<BaseLayout>
  <Text classNames="mt-12">
    I am a self-taught front-end developer with over 7 years of experience in
    web and mobile development. Strong experience with JavaScript/TypeScript,
    Ruby on Rails, Java/Obj-C, and Rust. Proven ability to lead development
    teams and improve developer experience. Passionate about contributing to
    open-source communities.
  </Text>
  <Heading classNames="mt-16 mb-8">Writing.</Heading>
  <ul>
    {
      posts.map((post) => (
        <li>
          <PostCard
            url={post.url}
            title={post.frontmatter.title}
            description={post.frontmatter.description}
            date={post.frontmatter.pubDate}
          />
        </li>
      ))
    }
  </ul>
  <div class="inline-block">
    <a href="/blog" class="p-2 flex items-center">
      <TextSmall>Read more</TextSmall><ArrowRight />
    </a>
  </div>
  <Heading classNames="mt-32 mb-8">Experiments.</Heading>
  <ul>
    {
      labs.map((lab) => (
        <li>
          <PostCard
            url={lab.url}
            title={lab.title}
            description={lab.description}
            date={lab.pubDate}
          />
        </li>
      ))
    }
  </ul>
  <div class="inline-block">
    <a href="/blog" class="p-2 flex items-center">
      <TextSmall>View more experiments</TextSmall><ArrowRight />
    </a>
  </div>
</BaseLayout>
